<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="TaoWang" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <title>"flip"动画</title>
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="奔跑的蚂蚁" type="application/atom+xml" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/media/css/style.css">
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/retina.js/1.3.0/retina.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script type="text/javascript"> hljs.initHighlightingOnLoad(); </script>
  </head>
  <body>
      <div id="main" role="main">
        <header>
          <div id="header">
            <h1><a title="奔跑的蚂蚁" class="" href="/">奔跑的蚂蚁</a></h1>
          </div>
          <nav>
            
            <span><a title="Archive" href="/archive.html"><i class="fa fa-list-ul"></i></a></span>
            
            <span><a title="Tags" href="/tags.html"><i class="fa fa-tags"></i></a></span>
            
            <span><a title="About" href="/about.html"><i class="fa fa-user"></i></a></span>
            
          </nav>
        </header>
        <div id="content">
        <article>
  <section class="title">
    <h2>"flip"动画 </h2>
  </section>
  <section class="meta">
  <span class="time">
    <time datetime="2016-03-28">2016-03-28</time>
  </span>
  
  <span class="tags">
    
    <a href="/tags.html#javascript" title="javascript">#javascript</a>
    
    <a href="/tags.html#animation" title="animation">#animation</a>
    
  </span>
  
  </section>
  <section class="post">
  <h3>flip动画</h3>

<ol>
<li>first: 元素在动画中的初始状态</li>
<li>last: 元素的动画的结束状态</li>
<li>invert: 计算first和last状态的差值，然后设置相应的属性(transform, opacity等)，使元素在初始状态。</li>
<li>play: 触发整个动画</li>
</ol>


<h4>一个例子🌰</h4>

<pre><code class="html">&lt;head&gt;
  &lt;style media="screen"&gt;
    body {
    }

    .container {
      width: 100%;
      height: 100%;
      margin: 0 auto;
      background: #BBDEFB;
      position: relative;
    }

    .circle {
      width: 100px;
      height: 100px;
      border-radius: 100%;
      background-color: #E1BEE7;
      position: absolute;
      top: 10px;
      left: 10px;
    }

    .circle-end {
      top: auto;
      left: auto;
      bottom: 10px;
      right: 10px;
    }

  &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;button type="button" name="button" onclick="doAnimate()"&gt;Animate&lt;/button&gt;
  &lt;div class="container"&gt;
    &lt;div class="circle"&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
  function doAnimate() {
    var node = document.getElementsByClassName('circle')[0]

    //计算初始属性
    var first = node.getBoundingClientRect()
    node.classList.add('circle-end')
    //计算结束属性
    var last = node.getBoundingClientRect()

    //invert
    var invertX = first.left - last.left
    var invertY = first.top - last.top

    node.style.transform = 'translate(' + invertX + 'px,' + invertY + 'px)'
    node.style.transition = 'transform 0s'

    requestAnimationFrame(function(node) {
      return function() {

        //触发动画
        node.style.transition = 'all 1s';
        node.style.transform  = '';
        console.log(node)
      }
    }(node))
  }

  &lt;/script&gt;
&lt;/body&gt;
</code></pre>

<h4>requestAnimationFrame函数</h4>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame</a>函数主要告诉浏览器在重绘每一帧动画时，可以运行用户定义的代码，可以进行相应的计算等等。</p>

<h4>参考资料</h4>

<ol>
<li><a href="https://medium.com/developers-writing/animating-the-unanimatable-1346a5aab3cd#.86itpf3ga">Animating the Unanimatable.</a></li>
<li><a href="https://aerotwist.com/blog/flip-your-animations/">FLIP Your Animations</a></li>
</ol>


  </section>
  
</article>

        </div>
        <footer>
          <div>
            
            &copy; 2015 ~ 2016 TaoWang | powered by jekyll | themed by <a href="http://lhzhang.com" title="sext vi">sext vi</a>
          </div>
        </footer>
      </div> <!-- main -->
  </body>
</html>
