<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="TaoWang" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <title>"flip"åŠ¨ç”»</title>
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="å¥”è·‘çš„èš‚èš" type="application/atom+xml" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/media/css/style.css">
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/retina.js/1.3.0/retina.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script type="text/javascript"> hljs.initHighlightingOnLoad(); </script>
  </head>
  <body>
      <div id="main" role="main">
        <header>
          <div id="header">
            <h1><a title="å¥”è·‘çš„èš‚èš" class="" href="/">å¥”è·‘çš„èš‚èš</a></h1>
          </div>
          <nav>
            
            <span><a title="Archive" href="/archive.html"><i class="fa fa-list-ul"></i></a></span>
            
            <span><a title="Tags" href="/tags.html"><i class="fa fa-tags"></i></a></span>
            
            <span><a title="About" href="/about.html"><i class="fa fa-user"></i></a></span>
            
          </nav>
        </header>
        <div id="content">
        <article>
  <section class="title">
    <h2>"flip"åŠ¨ç”» </h2>
  </section>
  <section class="meta">
  <span class="time">
    <time datetime="2016-03-28">2016-03-28</time>
  </span>
  
  <span class="tags">
    
    <a href="/tags.html#javascript" title="javascript">#javascript</a>
    
    <a href="/tags.html#animation" title="animation">#animation</a>
    
  </span>
  
  </section>
  <section class="post">
  <h3>flipåŠ¨ç”»</h3>

<ol>
<li>first: å…ƒç´ åœ¨åŠ¨ç”»ä¸­çš„åˆå§‹çŠ¶æ€</li>
<li>last: å…ƒç´ çš„åŠ¨ç”»çš„ç»“æŸçŠ¶æ€</li>
<li>invert: è®¡ç®—firstå’ŒlastçŠ¶æ€çš„å·®å€¼ï¼Œç„¶åè®¾ç½®ç›¸åº”çš„å±æ€§(transform, opacityç­‰)ï¼Œä½¿å…ƒç´ åœ¨åˆå§‹çŠ¶æ€ã€‚</li>
<li>play: è§¦å‘æ•´ä¸ªåŠ¨ç”»</li>
</ol>


<h4>ä¸€ä¸ªä¾‹å­ğŸŒ°</h4>

<pre><code class="html">&lt;head&gt;
  &lt;style media="screen"&gt;
    body {
    }

    .container {
      width: 100%;
      height: 100%;
      margin: 0 auto;
      background: #BBDEFB;
      position: relative;
    }

    .circle {
      width: 100px;
      height: 100px;
      border-radius: 100%;
      background-color: #E1BEE7;
      position: absolute;
      top: 10px;
      left: 10px;
    }

    .circle-end {
      top: auto;
      left: auto;
      bottom: 10px;
      right: 10px;
    }

  &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;button type="button" name="button" onclick="doAnimate()"&gt;Animate&lt;/button&gt;
  &lt;div class="container"&gt;
    &lt;div class="circle"&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;
  function doAnimate() {
    var node = document.getElementsByClassName('circle')[0]

    //è®¡ç®—åˆå§‹å±æ€§
    var first = node.getBoundingClientRect()
    node.classList.add('circle-end')
    //è®¡ç®—ç»“æŸå±æ€§
    var last = node.getBoundingClientRect()

    //invert
    var invertX = first.left - last.left
    var invertY = first.top - last.top

    node.style.transform = 'translate(' + invertX + 'px,' + invertY + 'px)'
    node.style.transition = 'transform 0s'

    requestAnimationFrame(function(node) {
      return function() {

        //è§¦å‘åŠ¨ç”»
        node.style.transition = 'all 1s';
        node.style.transform  = '';
        console.log(node)
      }
    }(node))
  }

  &lt;/script&gt;
&lt;/body&gt;
</code></pre>

<h4>requestAnimationFrameå‡½æ•°</h4>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame</a>å‡½æ•°ä¸»è¦å‘Šè¯‰æµè§ˆå™¨åœ¨é‡ç»˜æ¯ä¸€å¸§åŠ¨ç”»æ—¶ï¼Œå¯ä»¥è¿è¡Œç”¨æˆ·å®šä¹‰çš„ä»£ç ï¼Œå¯ä»¥è¿›è¡Œç›¸åº”çš„è®¡ç®—ç­‰ç­‰ã€‚</p>

<h4>å‚è€ƒèµ„æ–™</h4>

<ol>
<li><a href="https://medium.com/developers-writing/animating-the-unanimatable-1346a5aab3cd#.86itpf3ga">Animating the Unanimatable.</a></li>
<li><a href="https://aerotwist.com/blog/flip-your-animations/">FLIP Your Animations</a></li>
</ol>


  </section>
  
</article>

        </div>
        <footer>
          <div>
            
            &copy; 2015 ~ 2016 TaoWang | powered by jekyll | themed by <a href="http://lhzhang.com" title="sext vi">sext vi</a>
          </div>
        </footer>
      </div> <!-- main -->
  </body>
</html>
