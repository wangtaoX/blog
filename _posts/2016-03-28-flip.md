---
title: "\"flip\"åŠ¨ç”»"
layout: post
tags:
    - javascript
    - animation
---

### flipåŠ¨ç”»

1. first: å…ƒç´ åœ¨åŠ¨ç”»ä¸­çš„åˆå§‹çŠ¶æ€
2. last: å…ƒç´ çš„åŠ¨ç”»çš„ç»“æŸçŠ¶æ€
3. invert: è®¡ç®—firstå’ŒlastçŠ¶æ€çš„å·®å€¼ï¼Œç„¶åè®¾ç½®ç›¸åº”çš„å±æ€§(transform, opacityç­‰)ï¼Œä½¿å…ƒç´ åœ¨åˆå§‹çŠ¶æ€ã€‚
4. play: è§¦å‘æ•´ä¸ªåŠ¨ç”»

#### ä¸€ä¸ªä¾‹å­ğŸŒ°

```html
<head>
  <style media="screen">
    body {
    }

    .container {
      width: 100%;
      height: 100%;
      margin: 0 auto;
      background: #BBDEFB;
      position: relative;
    }

    .circle {
      width: 100px;
      height: 100px;
      border-radius: 100%;
      background-color: #E1BEE7;
      position: absolute;
      top: 10px;
      left: 10px;
    }

    .circle-end {
      top: auto;
      left: auto;
      bottom: 10px;
      right: 10px;
    }

  </style>
</head>

<body>
  <button type="button" name="button" onclick="doAnimate()">Animate</button>
  <div class="container">
    <div class="circle">
    </div>
  </div>
  <script type="text/javascript">
  function doAnimate() {
    var node = document.getElementsByClassName('circle')[0]

    //è®¡ç®—åˆå§‹å±æ€§
    var first = node.getBoundingClientRect()
    node.classList.add('circle-end')
    //è®¡ç®—ç»“æŸå±æ€§
    var last = node.getBoundingClientRect()

    //invert
    var invertX = first.left - last.left
    var invertY = first.top - last.top

    node.style.transform = 'translate(' + invertX + 'px,' + invertY + 'px)'
    node.style.transition = 'transform 0s'

    requestAnimationFrame(function(node) {
      return function() {

        //è§¦å‘åŠ¨ç”»
        node.style.transition = 'all 1s';
        node.style.transform  = '';
        console.log(node)
      }
    }(node))
  }

  </script>
</body>
```

#### requestAnimationFrameå‡½æ•°

[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)å‡½æ•°ä¸»è¦å‘Šè¯‰æµè§ˆå™¨åœ¨é‡ç»˜æ¯ä¸€å¸§åŠ¨ç”»æ—¶ï¼Œå¯ä»¥è¿è¡Œç”¨æˆ·å®šä¹‰çš„ä»£ç ï¼Œå¯ä»¥è¿›è¡Œç›¸åº”çš„è®¡ç®—ç­‰ç­‰ã€‚

#### å‚è€ƒèµ„æ–™

1. [Animating the Unanimatable.](https://medium.com/developers-writing/animating-the-unanimatable-1346a5aab3cd#.86itpf3ga)
2. [FLIP Your Animations](https://aerotwist.com/blog/flip-your-animations/)
